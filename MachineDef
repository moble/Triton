# -*- makefile -*-  This makes emacs see this file as a Makefile

ifndef HDF5_HOME
  $(warning You need to define the HDF5_HOME variable)
  $(warning On zwicky, do something like 'module add HDF5')
  $(error Cannot proceed)
endif

H5INC		= -I${HDF5_HOME}/include/
H5LIB		= -L${HDF5_HOME}/lib/ -lhdf5 -lhdf5_cpp

C++		= g++
C++LINK		= g++ ${H5LIB}
MAKEDEPEND	= g++ -MM

ifeq ($(OSTYPE),darwin)
	SHARED	= -dynamiclib -undefined dynamic_lookup -single_module
	INSTALL_NAME_TOOL = install_name_tool -id $(CURDIR)/../lib/lib$(THISDIR).so lib$(THISDIR).so
else ifeq ($(OSTYPE),linux)
	SHARED	= -shared -Wl,-soname,lib$(THISDIR).so
	INSTALL_NAME_TOOL =
else
	echo Unsupported OS type.  Please see the MachineDef file.
	false
endif

AR		= ar
ARFLAGS		= cr
RM		= /bin/rm -f
ECHO		= echo
LN		= ln -sf
SED		= sed
DIFF		= diff

## Use this for debug builds
# OPENMP		= 
# C++FLAGS	= -Wall -pg -g ${OPENMP} -DDEBUG

## Use this for standard builds
OPENMP		= -fopenmp
C++FLAGS	= ${H5INC} -fpic -O3 ${OPENMP}
